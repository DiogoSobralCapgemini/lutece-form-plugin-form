<#include "/admin/plugins/form/modify_form/tabs.html" />
<@tform action='jsp/admin/plugins/form/modifyForm/ModifyFormAdvancedParameters.jsp' params='enctype="multipart/form-data"'>
	<@row>
		<@columns>
			<@modifyFormLeftColumn form=form category_list=category_list />
		</@columns>
		<@columns>
			<@box color='solid'>
				<@boxBody>
					<@tabs>
						<@formTabs tab="advanced" />
					</@tabs>
					<@tabContent>
						<div class="tab-pane active">
							<@formGroup labelFor='front_office_title' labelKey='#i18n{form.createForm.frontOfficeTitle}' helpKey='#i18n{form.createForm.frontOfficeTitleComment}'>
								<@input type='text' name='front_office_title' value=form.frontOfficeTitle! maxlength=255 />
							</@formGroup>
							<@formGroup labelFor='is_shown_front_office_title' labelKey='#i18n{form.createForm.frontOfficeTitleIsShown}' helpKey='#i18n{form.createForm.frontOfficeTitleIsShownComment}'>
								<@checkBox labelFor='is_shown_front_office_title' name='is_shown_front_office_title' id='is_shown_front_office_title' value='1' checked=(form?exists && form.shownFrontOfficeTitle?? && form.shownFrontOfficeTitle) />
							</@formGroup>
							<@formGroup labelFor='is_shown_picture_front_office' labelKey='#i18n{form.createForm.frontOfficePictureIsShown}' helpKey='#i18n{form.createForm.frontOfficePictureIsShownComment}'>
								<@checkBox labelFor='is_shown_picture_front_office' name='is_shown_picture_front_office' id='is_shown_picture_front_office' value='1' checked=(form?exists && form.shownFrontOfficePicture?? && form.shownFrontOfficePicture) />
							</@formGroup>
							<@formGroup labelKey='#i18n{form.createForm.frontOfficePicture}' params='style="z-index:-1;"'>
								<input id="uploadFrontOfficePicture" type="file" name="front_office_picture" onchange="PreviewFrontOfficePicture()" />
								<img id="uploadFrontOfficePicturePreview" class="frontOfficePicturePreview" style="width: 100px; height: 100px;" <#if frontOfficePicture?has_content && frontOfficePictureSource?has_content>src="data:${frontOfficePicture.mimeType};base64,${frontOfficePictureSource}"</#if>/>
							</@formGroup>
							<@formGroup labelFor='workgroup' labelKey='#i18n{form.createForm.labelWorkgroup}' helpKey='#i18n{form.createForm.labelWorkgroupComment}'>
								<@select name='workgroup' id='workgroup' items=user_workgroup_list default_value=form.workgroup! />
							</@formGroup>
							<@formGroup labelFor='id_mailing_list' labelKey='#i18n{form.createForm.labelNotify}' helpKey='#i18n{form.createForm.labelNotifyComment}'>
								<@select name='id_mailing_list' id='id_mailing_list' items=mailing_list default_value='${form.idMailingList}' />
							</@formGroup>
							<#if is_active_captcha>
								<@formGroup labelFor='active_captcha' labelKey='#i18n{form.createForm.labelActiveCaptcha}' helpKey='#i18n{form.createForm.labelActiveCaptchaComment}'>
									<@checkBox name='active_captcha' id='active_captcha' value='1' checked=form?exists && form.activeCaptcha />
								</@formGroup>
							</#if>
							<@formGroup labelFor='id_theme_list' labelKey='#i18n{form.createForm.labelThemeXpage}'>
								<@select name='id_theme_list' items=theme_list default_value=form.codeTheme />
							</@formGroup>
							<@formGroup labelFor='limit_number_response' labelKey='#i18n{form.createForm.labelLimitNumberResponse}' helpKey='#i18n{form.createForm.labelLimitNumberResponseComment}'>
								<@checkBox name='limit_number_response' id='limit_number_response' value='1' checked=form?exists && form.limitNumberResponse />
							</@formGroup>
							<@formGroup labelFor='max_number_response' labelKey='#i18n{form.createForm.labelMaxNumberResponse}' helpKey='#i18n{form.createForm.labelMaxNumberResponseComment}'>
								<@input name='max_number_response' id='max_number_response' type='number' value=form.maxNumberResponse!'0' />
							</@formGroup>
							<@formGroup labelFor='active_store_adresse' labelKey='#i18n{form.createForm.labelStoreAdresse}' helpKey='#i18n{form.createForm.labelStoreAdresseComment}'>
								<@checkBox labelFor='active_store_adresse' name='active_store_adresse' id='active_store_adresse' value='1' checked=form?exists && form.activeStoreAdresse />
							</@formGroup>
							<#if is_active_mylutece_authentification>
								<@formGroup labelFor='active_mylutece_authentification' labelKey='#i18n{form.createForm.labelActiveMyLuteceAuthentification}' helpKey='#i18n{form.createForm.labelActiveMyLuteceAuthentificationComment}'>
									<@checkBox labelFor='active_mylutece_authentification' name='active_mylutece_authentification' id='active_mylutece_authentification' value='1' checked=form?exists&&form.activeMyLuteceAuthentification />
								</@formGroup>
							</#if>
							<@formGroup labelFor='active_requirement' labelKey='#i18n{form.createForm.labelActiveRequirement}' helpKey='#i18n{form.createForm.labelActiveRequirementComment}'>
								<@checkBox name='active_requirement' id='active_requirement' value='1' checked=form?exists&&form.activeRequirement />
							</@formGroup>
							<@formGroup labelFor='information_complementary_1' labelKey='#i18n{form.createForm.labelInformationComplementary_1}'>
								<@input type='text' name='information_complementary_1' value=form.infoComplementary1?if_exists maxlength=255 />
							</@formGroup>
							<@formGroup labelFor='information_complementary_2' labelKey='#i18n{form.createForm.labelInformationComplementary_2}'>
								<@input type='text' name='information_complementary_2' id='information_complementary_2' value=form.infoComplementary2?if_exists maxlength=255 />
							</@formGroup>
							<@formGroup labelFor='information_complementary_3' labelKey='#i18n{form.createForm.labelInformationComplementary_3}'>
								<@input type='text' name='information_complementary_3' id='information_complementary_3' value=form.infoComplementary3?if_exists maxlength=255 />
							</@formGroup>
							<@formGroup labelFor='information_complementary_4' labelKey='#i18n{form.createForm.labelInformationComplementary_4}'>
								<@input type='text' name='information_complementary_4' id='information_complementary_4' value=form.infoComplementary4?if_exists maxlength=255 />
							</@formGroup>
							<@formGroup labelFor='information_complementary_5' labelKey='#i18n{form.createForm.labelInformationComplementary_5}' helpKey='#i18n{form.createForm.labelInformationComplementary_comment}'>
								<@input type='text' name='information_complementary_5' id='information_complementary_5' value=form.infoComplementary5?if_exists maxlength=255 />
							</@formGroup>
							<@formGroup labelFor='support_https' labelKey='#i18n{form.createForm.supportHTTPS}' helpKey='#i18n{form.createForm.labelSupportHTTPS_comment}'>
								<@checkBox name='support_https' id='support_https' value='1' checked=form.supportHTTPS?has_content&&form.supportHTTPS />
							</@formGroup>
							<@formGroup>
								<@button type='submit' name='action_save' buttonIcon='save' title='#i18n{form.createForm.buttonSave}' size='' />
								<@button type='submit' name='action_apply' buttonIcon='check' title='#i18n{form.modifyForm.buttonApply}' size='' />
							</@formGroup>
						</div>
						<div id="modal-frontoffice-picture" class="modal-preview-form-picture">
							<div id="frontoffice-picture-block">
								<span class="close">
									<@icon style='times' />
								</span>
								<img class="modal-content" id="frontoffice-picture">
								<div id="frontoffice-picture-caption"></div>
							</div>
						</div>
					</@tabContent>
				</@boxBody>
			</@box>
		</@columns>
	</@row>
</@tform>
<script type="text/javascript">
function PreviewFrontOfficePicture() {
	var fileReader = new FileReader();
	fileReader.readAsDataURL(document.getElementById('uploadFrontOfficePicture').files[0]);
	fileReader.onload = function (fileReaderEvent) {
		document.getElementById('uploadFrontOfficePicturePreview').src = fileReaderEvent.target.result;
	};
};
	
// Get the modal
var modal = document.getElementById('modal-frontoffice-picture');

// Get the image and insert it inside the modal
var img = document.getElementById('uploadFrontOfficePicturePreview');
var modalImg = document.getElementById('frontoffice-picture');
var captionText = document.getElementById('frontoffice-picture-caption');
img.onclick = function(){
	modal.style.display = "block";
	modalImg.src = this.src;
	captionText.innerHTML = this.alt;
	var bodyElement = document.body;
	bodyElement.className += " hide-body-scrollbar";
}

var span = document.getElementsByClassName('close')[0];
span.onclick = function() {
	modal.style.display = "none";
	var bodyElement = document.body;
	bodyElement.classList.remove("hide-body-scrollbar");
} 
</script>