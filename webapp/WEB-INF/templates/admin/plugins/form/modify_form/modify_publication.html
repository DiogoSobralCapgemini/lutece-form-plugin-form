<#include "/admin/plugins/form/modify_form/tabs.html" />
<div class="row-fluid">
    <form action="jsp/admin/plugins/form/modifyForm/DoModifyFormPublication.jsp" method="post">
        <div class="span4">
            <@modifyFormLeftColumn form=form category_list=category_list />
        </div>
        <div id="avanced" class="span8">
            <fieldset class="form-horizontal">
                <@tabs tab="publication" />
                <div class="control-group">
                    <label class="control-label" for="publication_mode">#i18n{form.createForm.labelPublicationMode} :</label>
                    <div class="controls">
                        <input type="radio" name="publication_mode" id="publication_mode_user" value="0" onclick="javascript:doChangePublicationMode(this.form.publication_mode);"
                        <#if !form.dateBeginDisponibility?? && !form.dateEndDisponibility??>checked="checked"</#if> /> #i18n{form.createForm.labelPublicationModeUser}
                            <input type="radio" name="publication_mode" id="publication_mode_auto" value="1" onclick="javascript:doChangePublicationMode(this.form.publication_mode);"
                        <#if form.dateBeginDisponibility?? || form.dateEndDisponibility??>checked="checked"</#if> /> #i18n{form.createForm.labelPublicationModeAuto}
                        <span class="help-block">#i18n{form.createForm.labelPublicationModeComment}</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="date_begin_disponibility">#i18n{form.createForm.labelDateBeginDisponibility} :</label>
                    <div class="controls">
                        <div class="input-prepend">
                            <span class="add-on"><i class="icon-calendar"></i></span>
                            <input type="text" name="date_begin_disponibility" id="date_begin_disponibility" value="${form.dateBeginDisponibility?if_exists}" class="input-small"  onchange="javascript:doChangeDate(this.form.publication_mode);" />
                        </div>
                        <input type="hidden" name="date_begin_disponibility_save" id="date_begin_disponibility_save" value="${form.dateBeginDisponibility?if_exists}" />
                        <span class="help-block">#i18n{form.createForm.labelDateBeginDisponibilityComment}</span>
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="date_end_disponibility">#i18n{form.createForm.labelDateEndDisponibility} :</label>
                    <div class="controls">
                        <div class="input-prepend">
                            <span class="add-on"><i class="icon-calendar"></i></span>
                            <input type="text" name="date_end_disponibility" id="date_end_disponibility" value="${form.dateEndDisponibility?if_exists}" class="input-small"  onchange="javascript:doChangeDate(this.form.publication_mode);" />
                        </div>
                        <input type="hidden" name="date_end_disponibility_save" id="date_end_disponibility_save" value="${form.dateEndDisponibility?if_exists}" />
                        <span class="help-block">#i18n{form.createForm.labelDateEndDisponibilityComment}</span>
                    </div>
                </div>
            </fieldset>
        </div>
    </form>
</div>

<script type="text/javascript">
function doChangePublicationMode(radio){
        for (var i=0; i<radio.length; i++){
            if (radio[i].checked){
                if (radio[i].value=="0"){
                    document.getElementById('date_begin_disponibility').value="";
                    document.getElementById('date_end_disponibility').value="";
                } else  {
                    document.getElementById('date_begin_disponibility').value=document.getElementById('date_begin_disponibility_save').value;
                    document.getElementById('date_end_disponibility').value=document.getElementById('date_end_disponibility_save').value;
                }
            }
        }
    }

    function doChangeDate(radio)
    {
        document.getElementById('date_begin_disponibility_save').value=document.getElementById('date_begin_disponibility').value;
        document.getElementById('date_end_disponibility_save').value=document.getElementById('date_end_disponibility').value;
        
        if (document.getElementById('date_begin_disponibility').value!="" || document.getElementById('date_end_disponibility').value!="")
        {
            radio[0].checked=false;
            radio[1].checked=true;
        }
        else
        {
            radio[0].checked=true;
            radio[1].checked=false;
        }
    }
</script>
<script src="js/jquery/plugins/ui/jquery-ui-1.9.2.custom.min.js"></script>
<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>
<@getDatePickerRange idFieldFrom="date_begin_disponibility" idFieldTo="date_end_disponibility" language=locale />
